<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

        <!DOCTYPE html>
        <html lang="ko">

        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>기업고객 : 제품 목록 (ProductList)</title>
            <jsp:include page="/WEB-INF/view/common/common_include.jsp"></jsp:include>
            <link href="${CTX_PATH}/css/epc/style.css" rel="stylesheet" type="text/css">
        </head>

        <body>

            <div id="mask"></div>
            <div id="wrap_area">


                <!-- header 영역 -->
                -- header
                <jsp:include page="/WEB-INF/view/common/header.jsp"></jsp:include>
                header --


                <!-- main 영역 -->
                <div id="container">
                    <ul>
                        <li class="lnb">
                            <!-- lnb 영역 -->
                            <jsp:include page="/WEB-INF/view/common/lnbMenu.jsp"></jsp:include>
                        </li>
                        <li class="contents">
                            <div class="content">
                                <p class="Location">
                                    <a href="../dashboard/dashboard.do" class="btn_set home">메인으로</a>
                                    <span class="btn_nav bold">제품목록</span>
                                </p>

                                <!-- 상품 검색창 -->
                                <div id="divSearchProduct">
                                    <select>
                        <option>전체</option>
                        <option>UPS</option>
                        <option>서버</option>
                        <option>ROUTER</option>
                    </select>
                                    <select>
                        <option>전체</option>
                        <option>HP</option>
                        <option>IBM</option>
                    </select>
                                    <input type="text" class="inputTxt p15" value="test">
                                    <a href="" class="btnType blue"><span>검색</span></a>
                                </div>


                                <!-- 상품 목록 테이블 -->
                                <div id="divProductListTable">
                                    <table class="col">
                                        <caption>caption</caption>
                                        <colgroup>
                                            <col width="10%">
                                            <col width="15%">
                                            <col width="20%">
                                            <col width="15%">
                                            <col width="15%">
                                            <col width="20%">
                                        </colgroup>

                                        <thead>
                                            <tr>
                                                <th scope="col">장비 번호</th>
                                                <th scope="col">장비 구분</th>
                                                <th scope="col">모델 번호</th>
                                                <th scope="col">모델명</th>
                                                <th scope="col">제조사</th>
                                                <th scope="col">판매가격</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyProductListTable">
                                            <tr class="rowProductList" name="row20" row-num="20">
                                                <td scope="col" name="sales_id">1</td>
                                                <td scope="col" name="sales_type">서버</td>
                                                <td scope="col" name="model_code">ABC111</td>
                                                <td scope="col" name="model_nm">서버1</td>
                                                <td scope="col" name="mfcomp">IBM</td>
                                                <td scope="col" name="price">30000</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- 페이지네이션 -->
                                <div class="paging_area" id="comnGrpCodPagination">
                                    ${pageContext.request.contextPath}

                                    <!-- 페이지네이션 끝 -->
                                </div>


                                <!-- end of div#content -->
                            </div>

                        </li>
                    </ul>
                </div>


                <!-- footer 영역 -->
                -- footer
                <jsp:include page="/WEB-INF/view/common/footer.jsp"></jsp:include>
                footer --
                <!-- end of div#wrap_area -->
            </div>

            <div id="popProductDetail" class="layerPop layerType2 p45">
                <dl>
                    <dt>
<strong>제품 상세 보기</strong>
</dt>
                    <dd class="content">

                        <div style="text-align: right;">
                            <span>장비 번호</span> | <span>장비 구분</span>
                        </div>

                        <table class="row">
                            <caption>caption</caption>
                            <colgroup>
                                <col width="30%">
                                <col width="10%">
                                <col width="20%">
                                <col width="15%">
                                <col width="25%">
                            </colgroup>

                            <tbody>
                                <tr>
                                    <td scope="row" rowspan="3">이미지</td>
                                    <td scope="row">모델 번호</td>
                                    <td colspan="1"><input type="text" class="inputTxt p100" name="grp_cod_eplti" id="grp_cod_eplti" /></td>
                                    <td scope="row">주문 수량</td>
                                    <td colspan="1"><input type="text" class="inputTxt p100" name="grp_cod_eplti" id="grp_cod_eplti" /></td>
                                </tr>
                                <tr>
                                    <td scope="row">제조사</td>
                                    <td colspan="1"><input type="text" class="inputTxt p100" name="grp_cod_eplti" id="grp_cod_eplti" /></td>
                                    <td scope="row">납품 희망 일자</td>
                                    <td colspan="1"><input type="date" id="cal1" name="cal1" /></td>
                                </tr>
                                <tr>
                                    <td scope="row">판매가격</td>
                                    <td colspan="1"><input type="text" class="inputTxt p100" name="grp_cod_eplti" id="grp_cod_eplti" /></td>
                                    <td colspan="2"></td>
                                </tr>
                            </tbody>

                        </table>


                        <div class="popDetail">상세 정보</div>
                        <textarea>test message</textarea>

                        <div class="btn_areaC mt30">
                            <a href="" class="btnType blue" id="btnSaveGrpCod" name="btn"><span>장바구니에 담기</span></a>
                            <a href="" class="btnType blue" id="btnDeleteGrpCod" name="btn"><span>주문</span></a>
                            <a href="" class="btnType gray" id="btnCloseGrpCod" name="btn"><span>취소</span></a>
                        </div>
                    </dd>
                </dl>
            </div>


            <script>
                $(function() {
                    $('.rowProductList').on('click', function(e) {
                        let rowNum = e.currentTarget.attributes['row-num'].value;
                        plmodal(rowNum);
                        $.ajax({
                            url: "getProductList",
                            method: "GET",
                            success: function(result) {
                                inputProductListRows(result);
                            }
                        })
                    });

                });

                function testFunc() {
                    alert('test passed');
                }

                function plmodal(rowNum) {
                    alert(rowNum);
                    gfModalPop('#popProductDetail');
                }

                function inputProductListRows(productList) {
                    alert('ajax succ');
                    $.each(productList, function(index, item) {
                        let newRow = '  <tr class="rowProductList" name="' + index + '" row-num="' + index + '">';
                        newRow += '     <td name="sales_id">';
                        newRow += item.sales_id;
                        newRow += '     </td>';
                        newRow += '     <td name="sales_type">';
                        newRow += item.sales_type;
                        newRow += '     </td>';
                        newRow += '     <td name="model_code">';
                        newRow += item.model_code;
                        newRow += '     </td>';
                        newRow += '     <td name="model_nm">';
                        newRow += item.model_nm;
                        newRow += '     </td>';
                        newRow += '     <td name="mfcomp">';
                        newRow += item.mfcomp;
                        newRow += '     </td>';
                        newRow += '     <td name="price">';
                        newRow += item.price;
                        newRow += '     </td>';
                        $('#tbodyProductListTable').append($(newRow));
                    });
                }
            </script>
        </body>

        </html>